var ElevationProfile;(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};(()=>{t.d(e,{default:()=>Bn}),window.ol&&!ol.ext&&(ol.ext={});var n=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t};window.ol&&(ol.inherits||(ol.inherits=n)),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),window.Element&&!Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)});const i=n;var o="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};"log2"in Math&&Math.log2;function r(t,e,n,i,o,r){var a=o-n,l=r-i;if(0!==a||0!==l){var h=((t-n)*a+(e-i)*l)/(a*a+l*l);h>1?(n=o,i=r):h>0&&(n+=a*h,i+=l*h)}return s(t,e,n,i)}function s(t,e,n,i){var o=n-t,r=i-e;return o*o+r*r}function a(t){return t*Math.PI/180}function l(t,e,n){return t+n*(e-t)}var h=6371008.8;function u(t,e,n){var i=n||h,o=a(t[1]),r=a(e[1]),s=(r-o)/2,l=a(e[0]-t[0])/2,u=Math.sin(s)*Math.sin(s)+Math.sin(l)*Math.sin(l)*Math.cos(o)*Math.cos(r);return 2*i*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}var c={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"};var f={};f[c.RADIANS]=6370997/(2*Math.PI),f[c.DEGREES]=2*Math.PI*6370997/360,f[c.FEET]=.3048,f[c.METERS]=1,f[c.USFEET]=1200/3937;const p=c;const d=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||f[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();var g,y=(g=function(t,e){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},g(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),v=6378137,_=Math.PI*v,m=[-_,-_,_,_],C=[-180,-85,180,85],w=v*Math.log(Math.tan(Math.PI/2)),x=function(t){function e(e){return t.call(this,{code:e,units:p.METERS,extent:m,global:!0,worldExtent:C,getPointResolution:function(t,e){return t/o(e[1]/v)}})||this}return y(e,t),e}(d),E=[new x("EPSG:3857"),new x("EPSG:102100"),new x("EPSG:102113"),new x("EPSG:900913"),new x("http://www.opengis.net/def/crs/EPSG/0/3857"),new x("http://www.opengis.net/gml/srs/epsg.xml#3857")];function b(t,e,n){var i=t.length,o=n>1?n:2,r=e;void 0===r&&(r=o>2?t.slice():new Array(i));for(var s=0;s<i;s+=o){r[s]=_*t[s]/180;var a=v*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));a>w?a=w:a<-w&&(a=-w),r[s+1]=a}return r}function L(t,e,n){var i=t.length,o=n>1?n:2,r=e;void 0===r&&(r=o>2?t.slice():new Array(i));for(var s=0;s<i;s+=o)r[s]=180*t[s]/_,r[s+1]=360*Math.atan(Math.exp(t[s+1]/v))/Math.PI-90;return r}var M=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),P=[-180,-90,180,90],O=6378137*Math.PI/180,S=function(t){function e(e,n){return t.call(this,{code:e,units:p.DEGREES,extent:P,axisOrientation:n,global:!0,metersPerUnit:O,worldExtent:P})||this}return M(e,t),e}(d),T=[new S("CRS:84"),new S("EPSG:4326","neu"),new S("urn:ogc:def:crs:OGC:1.3:CRS84"),new S("urn:ogc:def:crs:OGC:2:84"),new S("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new S("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new S("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],k={};var A={};function R(t,e,n){var i=t.getCode(),o=e.getCode();i in A||(A[i]={}),A[i][o]=n}function F(t,e,n){var i;if(void 0!==e){for(var o=0,r=t.length;o<r;++o)e[o]=t[o];i=e}else i=t.slice();return i}function D(t,e,n){if(void 0!==e&&t!==e){for(var i=0,o=t.length;i<o;++i)e[i]=t[i];t=e}return t}function G(t){!function(t,e){k[t]=e}(t.getCode(),t),R(t,t,F)}function I(t){return"string"==typeof t?k[e=t]||k[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function j(t){!function(t){t.forEach(G)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&R(e,t,F)}))}))}function N(t,e){var n=function(t,e){var n;return t in A&&e in A[t]&&(n=A[t][e]),n}(t.getCode(),e.getCode());return n||(n=D),n}function z(t,e){return N(I(t),I(e))}function X(t,e,n){return z(e,n)(t,void 0,t.length)}var Y,B,q;j(E),j(T),Y=E,B=b,q=L,T.forEach((function(t){Y.forEach((function(e){R(t,e,B),R(e,t,q)}))}));const U=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),W="propertychange";const H=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function V(t,e){return t>e?1:t<e?-1:0}function K(t,e){for(var n=Array.isArray(e)?e:[e],i=n.length,o=0;o<i;o++)t[t.length]=n[o]}function Z(t,e){var n=t.length;if(n!==e.length)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function J(){}var $="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),i=1,o=arguments.length;i<o;++i){var r=arguments[i];if(null!=r)for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])}return n};function Q(t){for(var e in t)delete t[e]}"function"==typeof Object.values&&Object.values;var tt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();const et=function(t){function e(e){var n=t.call(this)||this;return n.eventTarget_=e,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return tt(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var n=this.listeners_||(this.listeners_={}),i=n[t]||(n[t]=[]);-1===i.indexOf(e)&&i.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t,n=e?t:t.type,i=this.listeners_&&this.listeners_[n];if(i){var o=e?new U(t):t;o.target||(o.target=this.eventTarget_||this);var r,s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in s||(s[n]=0,a[n]=0),++s[n];for(var l=0,h=i.length;l<h;++l)if(!1===(r="handleEvent"in i[l]?i[l].handleEvent(o):i[l].call(this,o))||o.propagationStopped){r=!1;break}if(0==--s[n]){var u=a[n];for(delete a[n];u--;)this.removeEventListener(n,J);delete s[n]}return r}},e.prototype.disposeInternal=function(){this.listeners_&&Q(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},e.prototype.hasListener=function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)},e.prototype.removeEventListener=function(t,e){var n=this.listeners_&&this.listeners_[t];if(n){var i=n.indexOf(e);-1!==i&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[i]=J,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t]))}},e}(H),nt="change";function it(t,e,n,i,o){if(i&&i!==t&&(n=n.bind(i)),o){var r=n;n=function(){t.removeEventListener(e,n),r.apply(this,arguments)}}var s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function ot(t,e,n,i){return it(t,e,n,i,!0)}function rt(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Q(t))}var st=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),at=function(t){function e(){var e=t.call(this)||this;return e.on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e}return st(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(nt)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,e){if(Array.isArray(t)){for(var n=t.length,i=new Array(n),o=0;o<n;++o)i[o]=it(this,t[o],e);return i}return it(this,t,e)},e.prototype.onceInternal=function(t,e){var n;if(Array.isArray(t)){var i=t.length;n=new Array(i);for(var o=0;o<i;++o)n[o]=ot(this,t[o],e)}else n=ot(this,t,e);return e.ol_key=n,n},e.prototype.unInternal=function(t,e){var n=e.ol_key;if(n)!function(t){if(Array.isArray(t))for(var e=0,n=t.length;e<n;++e)rt(t[e]);else rt(t)}(n);else if(Array.isArray(t))for(var i=0,o=t.length;i<o;++i)this.removeEventListener(t[i],e);else this.removeEventListener(t,e)},e}(et);at.prototype.on,at.prototype.once,at.prototype.un;const lt=at;function ht(){return function(){throw new Error("Unimplemented abstract method.")}()}var ut=0;var ct="6.15.1",ft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),pt=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.key=n,o.oldValue=i,o}return ft(e,t),e}(U);const dt=function(t){function e(e){var n,i=t.call(this)||this;return i.on,i.once,i.un,(n=i).ol_uid||(n.ol_uid=String(++ut)),i.values_=null,void 0!==e&&i.setProperties(e),i}return ft(e,t),e.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&$({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,e){var n;n="change:".concat(t),this.hasListener(n)&&this.dispatchEvent(new pt(n,t,e)),n=W,this.hasListener(n)&&this.dispatchEvent(new pt(n,t,e))},e.prototype.addChangeListener=function(t,e){this.addEventListener("change:".concat(t),e)},e.prototype.removeChangeListener=function(t,e){this.removeEventListener("change:".concat(t),e)},e.prototype.set=function(t,e,n){var i=this.values_||(this.values_={});if(n)i[t]=e;else{var o=i[t];i[t]=e,o!==e&&this.notify(t,o)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.applyProperties=function(t){t.values_&&$(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var n=this.values_[t];delete this.values_[t],function(t){var e;for(e in t)return!1;return!e}(this.values_)&&(this.values_=null),e||this.notify(t,n)}},e}(lt),gt="postrender";function yt(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}var vt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();const _t=function(t){function e(e){var n=t.call(this)||this,i=e.element;return!i||e.target||i.style.pointerEvents||(i.style.pointerEvents="auto"),n.element=i||null,n.target_=null,n.map_=null,n.listenerKeys=[],e.render&&(n.render=e.render),e.target&&n.setTarget(e.target),n}return vt(e,t),e.prototype.disposeInternal=function(){yt(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&yt(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)rt(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,t)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==J&&this.listenerKeys.push(it(t,gt,this.render,this)),t.render())},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(dt);var mt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();const Ct=function(t){function e(e){var n=this,i="Assertion failed. See https://openlayers.org/en/"+("v"+ct.split("-")[0])+"/doc/errors/#"+e+" for details.";return(n=t.call(this,i)||this).code=e,n.name="AssertionError",n.message=i,n}return mt(e,t),e}(Error);var wt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),xt=function(t){function e(e){var n=t.call(this)||this;if(n.on,n.once,n.un,n.id_=void 0,n.geometryName_="geometry",n.style_=null,n.styleFunction_=void 0,n.geometryChangeKey_=null,n.addChangeListener(n.geometryName_,n.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var i=e;n.setGeometry(i)}else{var o=e;n.setProperties(o)}return n}return wt(e,t),e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&t.setGeometry(n.clone());var i=this.getStyle();return i&&t.setStyle(i),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(rt(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=it(t,nt,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;var e;Array.isArray(t)?e=t:(!function(t,e){if(!t)throw new Ct(e)}("function"==typeof t.getZIndex,41),e=[t]);return function(){return e}}(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(dt);const Et=xt;const bt=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}();var Lt=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=Mt,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.setHitDetectionRenderer=function(t){this.hitDetectionRenderer_=t},t.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Mt,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}();function Mt(t){return t.getGeometry()}const Pt=Lt;const Ot=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}(),St="point";function Tt(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}var kt=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Tt(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new bt({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:St,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){var e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getJustify=function(){return this.justify_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=Tt(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setJustify=function(t){this.justify_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}();const At=kt,Rt="XY",Ft="XYZ",Dt="XYM",Gt="XYZM";new Array(6);function It(t,e,n,i,o,r,s,a){var l=Math.sin(r),h=Math.cos(r);return t[0]=i*h,t[1]=o*l,t[2]=-i*l,t[3]=o*h,t[4]=s*i*h-a*i*l+e,t[5]=s*o*l+a*o*h+n,t}const jt=0,Nt=1,zt=2,Xt=4,Yt=8,Bt=16;function qt(t,e,n){var i,o;return(i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*i+(o=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*o}function Ut(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function Wt(t,e){var n=t[0],i=t[1],o=t[2],r=t[3],s=e[0],a=e[1],l=jt;return s<n?l|=Bt:s>o&&(l|=Xt),a<i?l|=Yt:a>r&&(l|=zt),l===jt&&(l=Nt),l}function Ht(t,e,n,i,o){return o?(o[0]=t,o[1]=e,o[2]=n,o[3]=i,o):[t,e,n,i]}function Vt(t){return Ht(1/0,1/0,-1/0,-1/0,t)}function Kt(t,e,n,i,o){return Zt(Vt(o),t,e,n,i)}function Zt(t,e,n,i,o){for(;n<i;n+=o)Jt(t,e[n],e[n+1]);return t}function Jt(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function $t(t,e){var n;return(n=e(Qt(t)))||(n=e(te(t)))||(n=e(oe(t)))?n:(n=e(ie(t)))||!1}function Qt(t){return[t[0],t[1]]}function te(t){return[t[2],t[1]]}function ee(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function ne(t){return t[3]-t[1]}function ie(t){return[t[0],t[3]]}function oe(t){return[t[2],t[3]]}function re(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function se(t,e,n,i,o,r,s){for(var a=s||[],l=Math.cos(o),h=Math.sin(o),u=r[0],c=r[1],f=0,p=e;p<n;p+=i){var d=t[p]-u,g=t[p+1]-c;a[f++]=u+d*l-g*h,a[f++]=c+d*h+g*l;for(var y=p+2;y<p+i;++y)a[f++]=t[y]}return s&&a.length!=f&&(a.length=f),a}function ae(t,e,n,i,o,r,s){for(var a=s||[],l=0,h=e;h<n;h+=i){a[l++]=t[h]+o,a[l++]=t[h+1]+r;for(var u=h+2;u<h+i;++u)a[l++]=t[u]}return s&&a.length!=l&&(a.length=l),a}var le=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),he=[1,0,0,1,0,0],ue=function(t){function e(){var e,n,i,o,r,s=t.call(this)||this;return s.extent_=[1/0,1/0,-1/0,-1/0],s.extentRevision_=-1,s.simplifiedGeometryMaxMinSquaredTolerance=0,s.simplifiedGeometryRevision=0,s.simplifyTransformedInternal=(e=function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);var i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(e)},r=!1,function(){var t=Array.prototype.slice.call(arguments);return r&&this===o&&Z(t,i)||(r=!0,o=this,i=t,n=e.apply(this,arguments)),n}),s}return le(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return ht()},e.prototype.closestPointXY=function(t,e,n,i){return ht()},e.prototype.containsXY=function(t,e){var n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e},e.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return ht()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Vt(e),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){ht()},e.prototype.scale=function(t,e,n){ht()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return ht()},e.prototype.getType=function(){return ht()},e.prototype.applyTransform=function(t){ht()},e.prototype.intersectsExtent=function(t){return ht()},e.prototype.translate=function(t,e){ht()},e.prototype.transform=function(t,e){var n=I(t),i=n.getUnits()==p.TILE_PIXELS?function(t,i,o){var r=n.getExtent(),s=n.getWorldExtent(),a=ne(s)/ne(r);return It(he,s[0],s[3],a,-a,0,0,0),function(t,e,n,i,o,r){for(var s=r||[],a=0,l=e;l<n;l+=i){var h=t[l],u=t[l+1];s[a++]=o[0]*h+o[2]*u+o[4],s[a++]=o[1]*h+o[3]*u+o[5]}r&&s.length!=a&&(s.length=a)}(t,0,t.length,o,he,i),z(n,e)(t,i,o)}:z(n,e);return this.applyTransform(i),this},e}(dt);const ce=ue;var fe=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),pe=function(t){function e(){var e=t.call(this)||this;return e.layout=Rt,e.stride=2,e.flatCoordinates=null,e}return fe(e,t),e.prototype.computeExtent=function(t){return Kt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return ht()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=de(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){ht()},e.prototype.setLayout=function(t,e,n){var i;if(t)i=de(t);else{for(var o=0;o<n;++o){if(0===e.length)return this.layout=Rt,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=Rt:3==t?e=Ft:4==t&&(e=Gt);return e}(i=e.length)}this.layout=t,this.stride=i},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var i=this.getStride();se(n,0,n.length,i,t,e,n),this.changed()}},e.prototype.scale=function(t,e,n){var i=e;void 0===i&&(i=t);var o=n;o||(o=ee(this.getExtent()));var r=this.getFlatCoordinates();if(r){var s=this.getStride();!function(t,e,n,i,o,r,s,a){for(var l=a||[],h=s[0],u=s[1],c=0,f=e;f<n;f+=i){var p=t[f]-h,d=t[f+1]-u;l[c++]=h+o*p,l[c++]=u+r*d;for(var g=f+2;g<f+i;++g)l[c++]=t[g]}a&&l.length!=c&&(l.length=c)}(r,0,r.length,s,t,i,o,r),this.changed()}},e.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var i=this.getStride();ae(n,0,n.length,i,t,e,n),this.changed()}},e}(ce);function de(t){var e;return t==Rt?e=2:t==Ft||t==Dt?e=3:t==Gt&&(e=4),e}const ge=pe;function ye(t,e,n,i,o,r,s){var a,h=t[e],u=t[e+1],c=t[n]-h,f=t[n+1]-u;if(0===c&&0===f)a=e;else{var p=((o-h)*c+(r-u)*f)/(c*c+f*f);if(p>1)a=n;else{if(p>0){for(var d=0;d<i;++d)s[d]=l(t[e+d],t[n+d],p);return void(s.length=i)}a=e}}for(d=0;d<i;++d)s[d]=t[a+d];s.length=i}function ve(t,e,n,i,o){var r=t[e],a=t[e+1];for(e+=i;e<n;e+=i){var l=t[e],h=t[e+1],u=s(r,a,l,h);u>o&&(o=u),r=l,a=h}return o}function _e(t,e,n,i,o){for(var r=0,s=n.length;r<s;++r){var a=n[r];o=ve(t,e,a,i,o),e=a}return o}function me(t,e,n,i,o,r,a,l,h,u,c){if(e==n)return u;var f,p;if(0===o){if((p=s(a,l,t[e],t[e+1]))<u){for(f=0;f<i;++f)h[f]=t[e+f];return h.length=i,p}return u}for(var d=c||[NaN,NaN],g=e+i;g<n;)if(ye(t,g-i,g,i,a,l,d),(p=s(a,l,d[0],d[1]))<u){for(u=p,f=0;f<i;++f)h[f]=d[f];h.length=i,g+=i}else g+=i*Math.max((Math.sqrt(p)-Math.sqrt(u))/o|0,1);if(r&&(ye(t,n-i,e,i,a,l,d),(p=s(a,l,d[0],d[1]))<u)){for(u=p,f=0;f<i;++f)h[f]=d[f];h.length=i}return u}function Ce(t,e,n,i,o,r,s,a,l,h,u){for(var c=u||[NaN,NaN],f=0,p=n.length;f<p;++f){var d=n[f];h=me(t,e,d,i,o,r,s,a,l,h,c),e=d}return h}function we(t,e,n,i){for(var o=0,r=n.length;o<r;++o)t[e++]=n[o];return e}function xe(t,e,n,i){for(var o=0,r=n.length;o<r;++o)for(var s=n[o],a=0;a<i;++a)t[e++]=s[a];return e}function Ee(t,e,n,i,o){for(var r=o||[],s=0,a=0,l=n.length;a<l;++a){var h=xe(t,e,n[a],i);r[s++]=h,e=h}return r.length=s,r}function be(t,e,n,i,o,s,a){var l=(n-e)/i;if(l<3){for(;e<n;e+=i)s[a++]=t[e],s[a++]=t[e+1];return a}var h=new Array(l);h[0]=1,h[l-1]=1;for(var u=[e,n-i],c=0;u.length>0;){for(var f=u.pop(),p=u.pop(),d=0,g=t[p],y=t[p+1],v=t[f],_=t[f+1],m=p+i;m<f;m+=i){var C=r(t[m],t[m+1],g,y,v,_);C>d&&(c=m,d=C)}d>o&&(h[(c-e)/i]=1,p+i<c&&u.push(p,c),c+i<f&&u.push(c,f))}for(m=0;m<l;++m)h[m]&&(s[a++]=t[e+m*i],s[a++]=t[e+m*i+1]);return a}function Le(t,e,n,i,o,r,s,a){for(var l=0,h=n.length;l<h;++l){var u=n[l];s=be(t,e,u,i,o,r,s),a.push(s),e=u}return s}function Me(t,e){return e*Math.round(t/e)}function Pe(t,e,n,i,o,r,s){if(e==n)return s;var a,l,h=Me(t[e],o),u=Me(t[e+1],o);e+=i,r[s++]=h,r[s++]=u;do{if(a=Me(t[e],o),l=Me(t[e+1],o),(e+=i)==n)return r[s++]=a,r[s++]=l,s}while(a==h&&l==u);for(;e<n;){var c=Me(t[e],o),f=Me(t[e+1],o);if(e+=i,c!=a||f!=l){var p=a-h,d=l-u,g=c-h,y=f-u;p*y==d*g&&(p<0&&g<p||p==g||p>0&&g>p)&&(d<0&&y<d||d==y||d>0&&y>d)?(a=c,l=f):(r[s++]=a,r[s++]=l,h=a,u=l,a=c,l=f)}}return r[s++]=a,r[s++]=l,s}function Oe(t,e,n,i,o,r,s,a){for(var l=0,h=n.length;l<h;++l){var u=n[l];s=Pe(t,e,u,i,o,r,s),a.push(s),e=u}return s}function Se(t,e,n,i,o){var r;for(e+=i;e<n;e+=i)if(r=o(t.slice(e-i,e),t.slice(e,e+i)))return r;return!1}function Te(t,e,n,i,o){for(var r=void 0!==o?o:[],s=0,a=e;a<n;a+=i)r[s++]=t.slice(a,a+i);return r.length=s,r}function ke(t,e,n,i,o){for(var r=void 0!==o?o:[],s=0,a=0,l=n.length;a<l;++a){var h=n[a];r[s++]=Te(t,e,h,i,r[s]),e=h}return r.length=s,r}function Ae(t,e,n,i,o,r,s){var a,h,u=(n-e)/i;if(1===u)a=e;else if(2===u)a=e,h=o;else if(0!==u){for(var c=t[e],f=t[e+1],p=0,d=[0],g=e+i;g<n;g+=i){var y=t[g],v=t[g+1];p+=Math.sqrt((y-c)*(y-c)+(v-f)*(v-f)),d.push(p),c=y,f=v}var _=o*p,m=function(t,e,n){for(var i,o,r=n||V,s=0,a=t.length,l=!1;s<a;)(o=+r(t[i=s+(a-s>>1)],e))<0?s=i+1:(a=i,l=!o);return l?s:~s}(d,_);m<0?(h=(_-d[-m-2])/(d[-m-1]-d[-m-2]),a=e+(-m-2)*i):a=e+m*i}var C=s>1?s:2,w=r||new Array(C);for(g=0;g<C;++g)w[g]=void 0===a?NaN:void 0===h?t[a+g]:l(t[a+g],t[a+i+g],h);return w}function Re(t,e,n,i,o,r){if(n==e)return null;var s;if(o<t[e+i-1])return r?((s=t.slice(e,e+i))[i-1]=o,s):null;if(t[n-1]<o)return r?((s=t.slice(n-i,n))[i-1]=o,s):null;if(o==t[e+i-1])return t.slice(e,e+i);for(var a=e/i,h=n/i;a<h;){var u=a+h>>1;o<t[(u+1)*i-1]?h=u:a=u+1}var c=t[a*i-1];if(o==c)return t.slice((a-1)*i,(a-1)*i+i);var f=(o-c)/(t[(a+1)*i-1]-c);s=[];for(var p=0;p<i-1;++p)s.push(l(t[(a-1)*i+p],t[a*i+p],f));return s.push(o),s}function Fe(t,e,n,i,o){return!$t(o,(function(o){return!De(t,e,n,i,o[0],o[1])}))}function De(t,e,n,i,o,r){for(var s=0,a=t[n-i],l=t[n-i+1];e<n;e+=i){var h=t[e],u=t[e+1];l<=r?u>r&&(h-a)*(r-l)-(o-a)*(u-l)>0&&s++:u<=r&&(h-a)*(r-l)-(o-a)*(u-l)<0&&s--,a=h,l=u}return 0!==s}function Ge(t,e,n,i,o,r){if(0===n.length)return!1;if(!De(t,e,n[0],i,o,r))return!1;for(var s=1,a=n.length;s<a;++s)if(De(t,n[s-1],n[s],i,o,r))return!1;return!0}function Ie(t,e,n,i,o){var r,s,a=Zt([1/0,1/0,-1/0,-1/0],t,e,n,i);return!!re(o,a)&&(s=a,(r=o)[0]<=s[0]&&s[2]<=r[2]&&r[1]<=s[1]&&s[3]<=r[3]||(a[0]>=o[0]&&a[2]<=o[2]||(a[1]>=o[1]&&a[3]<=o[3]||Se(t,e,n,i,(function(t,e){return function(t,e,n){var i=!1,o=Wt(t,e),r=Wt(t,n);if(o===Nt||r===Nt)i=!0;else{var s=t[0],a=t[1],l=t[2],h=t[3],u=e[0],c=e[1],f=n[0],p=n[1],d=(p-c)/(f-u),g=void 0,y=void 0;r&zt&&!(o&zt)&&(i=(g=f-(p-h)/d)>=s&&g<=l),i||!(r&Xt)||o&Xt||(i=(y=p-(f-l)*d)>=a&&y<=h),i||!(r&Yt)||o&Yt||(i=(g=f-(p-a)/d)>=s&&g<=l),i||!(r&Bt)||o&Bt||(i=(y=p-(f-s)*d)>=a&&y<=h)}return i}(o,t,e)})))))}function je(t,e,n,i,o){if(!function(t,e,n,i,o){return!!(Ie(t,e,n,i,o)||De(t,e,n,i,o[0],o[1])||De(t,e,n,i,o[0],o[3])||De(t,e,n,i,o[2],o[1])||De(t,e,n,i,o[2],o[3]))}(t,e,n[0],i,o))return!1;if(1===n.length)return!0;for(var r=1,s=n.length;r<s;++r)if(Fe(t,n[r-1],n[r],i,o)&&!Ie(t,n[r-1],n[r],i,o))return!1;return!0}function Ne(t,e,n,i){for(var o=t[e],r=t[e+1],s=0,a=e+i;a<n;a+=i){var l=t[a],h=t[a+1];s+=Math.sqrt((l-o)*(l-o)+(h-r)*(h-r)),o=l,r=h}return s}var ze=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Xe=function(t){function e(e,n){var i=t.call(this)||this;return i.flatMidpoint_=null,i.flatMidpointRevision_=-1,i.maxDelta_=-1,i.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?i.setCoordinates(e,n):i.setFlatCoordinates(n,e),i}return ze(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?K(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,i){return i<qt(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ve(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),me(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,i))},e.prototype.forEachSegment=function(t){return Se(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=Dt&&this.layout!=Gt)return null;var n=void 0!==e&&e;return Re(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n)},e.prototype.getCoordinates=function(){return Te(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return Ae(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)},e.prototype.getLength=function(){return Ne(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=be(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,Rt)},e.prototype.getType=function(){return"LineString"},e.prototype.intersectsExtent=function(t){return Ie(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=xe(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ge);const Ye=Xe;var Be=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),qe=function(t){function e(e,n,i){var o=t.call(this)||this;if(o.ends_=[],o.maxDelta_=-1,o.maxDeltaRevision_=-1,Array.isArray(e[0]))o.setCoordinates(e,n);else if(void 0!==n&&i)o.setFlatCoordinates(n,e),o.ends_=i;else{for(var r=o.getLayout(),s=e,a=[],l=[],h=0,u=s.length;h<u;++h){var c=s[h];0===h&&(r=c.getLayout()),K(a,c.getFlatCoordinates()),l.push(a.length)}o.setFlatCoordinates(r,a),o.ends_=l}return o}return Be(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?K(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,i){return i<qt(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(_e(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ce(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,i))},e.prototype.getCoordinateAtM=function(t,e,n){if(this.layout!=Dt&&this.layout!=Gt||0===this.flatCoordinates.length)return null;var i=void 0!==e&&e,o=void 0!==n&&n;return function(t,e,n,i,o,r,s){if(s)return Re(t,e,n[n.length-1],i,o,r);var a;if(o<t[i-1])return r?((a=t.slice(0,i))[i-1]=o,a):null;if(t[t.length-1]<o)return r?((a=t.slice(t.length-i))[i-1]=o,a):null;for(var l=0,h=n.length;l<h;++l){var u=n[l];if(e!=u){if(o<t[e+i-1])return null;if(o<=t[u-1])return Re(t,e,u,i,o,!1);e=u}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,i,o)},e.prototype.getCoordinates=function(){return ke(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new Ye(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,n=this.layout,i=[],o=0,r=0,s=e.length;r<s;++r){var a=e[r],l=new Ye(t.slice(o,a),n);i.push(l),o=a}return i},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,n=0,i=this.ends_,o=this.stride,r=0,s=i.length;r<s;++r){var a=i[r];K(t,Ae(e,n,a,o,.5)),n=a}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=Le(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,i),new e(n,Rt,i)},e.prototype.getType=function(){return"MultiLineString"},e.prototype.intersectsExtent=function(t){return function(t,e,n,i,o){for(var r=0,s=n.length;r<s;++r){if(Ie(t,e,n[r],i,o))return!0;e=n[r]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=Ee(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(ge);const Ue=qe;var We=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),He=function(t){function e(e,n){var i=t.call(this)||this;return i.setCoordinates(e,n),i}return We(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,i){var o=this.flatCoordinates,r=s(t,e,o[0],o[1]);if(r<i){for(var a=this.stride,l=0;l<a;++l)n[l]=o[l];return n.length=a,r}return i},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return e=this.flatCoordinates,n=t,i=e[0],o=e[1],Ht(i,o,i,o,n);var e,n,i,o},e.prototype.getType=function(){return"Point"},e.prototype.intersectsExtent=function(t){return Ut(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=we(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ge);const Ve=He;var Ke=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ze=function(t){function e(e,n){var i=t.call(this)||this;return n&&!Array.isArray(e[0])?i.setFlatCoordinates(n,e):i.setCoordinates(e,n),i}return Ke(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?K(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,i){if(i<qt(this.getExtent(),t,e))return i;for(var o=this.flatCoordinates,r=this.stride,a=0,l=o.length;a<l;a+=r){var h=s(t,e,o[a],o[a+1]);if(h<i){i=h;for(var u=0;u<r;++u)n[u]=o[a+u];n.length=r}}return i},e.prototype.getCoordinates=function(){return Te(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new Ve(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,n=this.stride,i=[],o=0,r=t.length;o<r;o+=n){var s=new Ve(t.slice(o,o+n),e);i.push(s)}return i},e.prototype.getType=function(){return"MultiPoint"},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,n=this.stride,i=0,o=e.length;i<o;i+=n){if(Ut(t,e[i],e[i+1]))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=xe(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ge);const Je=Ze;function $e(t,e,n,i){for(var o=0,r=t[n-i],s=t[n-i+1];e<n;e+=i){var a=t[e],l=t[e+1];o+=s*a-r*l,r=a,s=l}return o/2}function Qe(t,e,n,i){for(var o=0,r=0,s=n.length;r<s;++r){var a=n[r];o+=$e(t,e,a,i),e=a}return o}var tn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),en=function(t){function e(e,n){var i=t.call(this)||this;return i.maxDelta_=-1,i.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?i.setCoordinates(e,n):i.setFlatCoordinates(n,e),i}return tn(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,i){return i<qt(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ve(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),me(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))},e.prototype.getArea=function(){return $e(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Te(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=be(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,Rt)},e.prototype.getType=function(){return"LinearRing"},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=xe(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ge);const nn=en;function on(t,e,n,i,o,r,s){for(var a,l,h,u,c,f,p,d=o[r+1],g=[],y=0,v=n.length;y<v;++y){var _=n[y];for(u=t[_-i],f=t[_-i+1],a=e;a<_;a+=i)c=t[a],p=t[a+1],(d<=f&&p<=d||f<=d&&d<=p)&&(h=(d-f)/(p-f)*(c-u)+u,g.push(h)),u=c,f=p}var m=NaN,C=-1/0;for(g.sort(V),u=g[0],a=1,l=g.length;a<l;++a){c=g[a];var w=Math.abs(c-u);w>C&&Ge(t,e,n,i,h=(u+c)/2,d)&&(m=h,C=w),u=c}return isNaN(m)&&(m=o[r]),s?(s.push(m,d,C),s):[m,d,C]}function rn(t,e,n,i){for(;e<n-i;){for(var o=0;o<i;++o){var r=t[e+o];t[e+o]=t[n-i+o],t[n-i+o]=r}e+=i,n-=i}}function sn(t,e,n,i){for(var o=0,r=t[n-i],s=t[n-i+1];e<n;e+=i){var a=t[e],l=t[e+1];o+=(a-r)*(l+s),r=a,s=l}return 0===o?void 0:o>0}function an(t,e,n,i,o){for(var r=void 0!==o&&o,s=0,a=n.length;s<a;++s){var l=n[s],h=sn(t,e,l,i);if(0===s){if(r&&h||!r&&!h)return!1}else if(r&&!h||!r&&h)return!1;e=l}return!0}function ln(t,e,n,i,o){for(var r=void 0!==o&&o,s=0,a=n.length;s<a;++s){var l=n[s],h=sn(t,e,l,i);(0===s?r&&h||!r&&!h:r&&!h||!r&&h)&&rn(t,e,l,i),e=l}return e}function hn(t,e,n,i,o){for(var r=0,s=n.length;r<s;++r)e=ln(t,e,n[r],i,o);return e}var un=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),cn=function(t){function e(e,n,i){var o=t.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,void 0!==n&&i?(o.setFlatCoordinates(n,e),o.ends_=i):o.setCoordinates(e,n),o}return un(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?K(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,i){return i<qt(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(_e(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ce(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))},e.prototype.containsXY=function(t,e){return Ge(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Qe(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?ln(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,ke(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=ee(this.getExtent());this.flatInteriorPoint_=on(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Ve(this.getFlatInteriorPoint(),Dt)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new nn(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[],o=0,r=0,s=n.length;r<s;++r){var a=n[r],l=new nn(e.slice(o,a),t);i.push(l),o=a}return i},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;an(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ln(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=Oe(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,i),new e(n,Rt,i)},e.prototype.getType=function(){return"Polygon"},e.prototype.intersectsExtent=function(t){return je(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=Ee(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(ge);const fn=cn;var pn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),dn=function(t){function e(e,n,i){var o=t.call(this)||this;if(o.endss_=[],o.flatInteriorPointsRevision_=-1,o.flatInteriorPoints_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){for(var r=o.getLayout(),s=e,a=[],l=[],h=0,u=s.length;h<u;++h){var c=s[h];0===h&&(r=c.getLayout());for(var f=a.length,p=c.getEnds(),d=0,g=p.length;d<g;++d)p[d]+=f;K(a,c.getFlatCoordinates()),l.push(p)}n=r,e=a,i=l}return void 0!==n&&i?(o.setFlatCoordinates(n,e),o.endss_=i):o.setCoordinates(e,n),o}return pn(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var n=this.flatCoordinates.length;K(this.flatCoordinates,t.getFlatCoordinates());for(var i=0,o=(e=t.getEnds().slice()).length;i<o;++i)e[i]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,n=new Array(t),i=0;i<t;++i)n[i]=this.endss_[i].slice();var o=new e(this.flatCoordinates.slice(),this.layout,n);return o.applyProperties(this),o},e.prototype.closestPointXY=function(t,e,n,i){return i<qt(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,n,i,o){for(var r=0,s=n.length;r<s;++r){var a=n[r];o=_e(t,e,a,i,o),e=a[a.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,n,i,o,r,s,a,l,h,u){for(var c=u||[NaN,NaN],f=0,p=n.length;f<p;++f){var d=n[f];h=Ce(t,e,d,i,o,r,s,a,l,h,c),e=d[d.length-1]}return h}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,i))},e.prototype.containsXY=function(t,e){return function(t,e,n,i,o,r){if(0===n.length)return!1;for(var s=0,a=n.length;s<a;++s){var l=n[s];if(Ge(t,e,l,i,o,r))return!0;e=l[l.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,n,i){for(var o=0,r=0,s=n.length;r<s;++r){var a=n[r];o+=Qe(t,e,a,i),e=a[a.length-1]}return o}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?hn(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,function(t,e,n,i,o){for(var r=void 0!==o?o:[],s=0,a=0,l=n.length;a<l;++a){var h=n[a];r[s++]=ke(t,e,h,i,r[s]),e=h[h.length-1]}return r.length=s,r}(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=function(t,e,n,i){for(var o=[],r=[1/0,1/0,-1/0,-1/0],s=0,a=n.length;s<a;++s){var l=n[s];r=Kt(t,e,l[0],i),o.push((r[0]+r[2])/2,(r[1]+r[3])/2),e=l[l.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=function(t,e,n,i,o){for(var r=[],s=0,a=n.length;s<a;++s){var l=n[s];r=on(t,e,l,i,o,2*s,r),e=l[l.length-1]}return r}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new Je(this.getFlatInteriorPoints().slice(),Dt)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,n,i,o){for(var r=0,s=n.length;r<s;++r){var a=n[r];if(!an(t,e,a,i,o))return!1;a.length&&(e=a[a.length-1])}return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=hn(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=function(t,e,n,i,o,r,s,a){for(var l=0,h=n.length;l<h;++l){var u=n[l],c=[];s=Oe(t,e,u,i,o,r,s,c),a.push(c),e=u[u.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,i),new e(n,Rt,i)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var n=this.endss_[t-1];e=n[n.length-1]}var i=this.endss_[t].slice(),o=i[i.length-1];if(0!==e)for(var r=0,s=i.length;r<s;++r)i[r]-=e;return new fn(this.flatCoordinates.slice(e,o),this.layout,i)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.endss_,i=[],o=0,r=0,s=n.length;r<s;++r){var a=n[r].slice(),l=a[a.length-1];if(0!==o)for(var h=0,u=a.length;h<u;++h)a[h]-=o;var c=new fn(e.slice(o,l),t,a);i.push(c),o=l}return i},e.prototype.getType=function(){return"MultiPolygon"},e.prototype.intersectsExtent=function(t){return function(t,e,n,i,o){for(var r=0,s=n.length;r<s;++r){var a=n[r];if(je(t,e,a,i,o))return!0;e=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var n=function(t,e,n,i,o){for(var r=o||[],s=0,a=0,l=n.length;a<l;++a){var h=Ee(t,e,n[a],i,r[s]);r[s++]=h,e=h[h.length-1]}return r.length=s,r}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{var i=n[n.length-1];this.flatCoordinates.length=0===i.length?0:i[i.length-1]}this.changed()},e}(ge);const gn=dn;var yn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),vn=function(t){function e(e,n,i){var o=t.call(this)||this;if(void 0!==i&&void 0===n)o.setFlatCoordinates(i,e);else{var r=n||0;o.setCenterAndRadius(e,r,i)}return o}return yn(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,i){var o=this.flatCoordinates,r=t-o[0],s=e-o[1],a=r*r+s*s;if(a<i){if(0===a)for(var l=0;l<this.stride;++l)n[l]=o[l];else{var h=this.getRadius()/Math.sqrt(a);n[0]=o[0]+h*r,n[1]=o[1]+h*s;for(l=2;l<this.stride;++l)n[l]=o[l]}return n.length=this.stride,a}return i},e.prototype.containsXY=function(t,e){var n=this.flatCoordinates,i=t-n[0],o=e-n[1];return i*i+o*o<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,n=e[this.stride]-e[0];return Ht(e[0]-n,e[1]-n,e[0]+n,e[1]+n,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return"Circle"},e.prototype.intersectsExtent=function(t){if(re(t,this.getExtent())){var e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||(t[1]<=e[1]&&t[3]>=e[1]||$t(t,this.intersectsCoordinate.bind(this)))}return!1},e.prototype.setCenter=function(t){var e=this.stride,n=this.flatCoordinates[e]-this.flatCoordinates[0],i=t.slice();i[e]=i[0]+n;for(var o=1;o<e;++o)i[e+o]=t[o];this.setFlatCoordinates(this.layout,i),this.changed()},e.prototype.setCenterAndRadius=function(t,e,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var i=this.flatCoordinates,o=we(i,0,t,this.stride);i[o++]=i[0]+e;for(var r=1,s=this.stride;r<s;++r)i[o++]=i[r];i.length=o,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var n=this.getCenter(),i=this.getStride();this.setCenter(se(n,0,n.length,i,t,e,n)),this.changed()},e.prototype.translate=function(t,e){var n=this.getCenter(),i=this.getStride();this.setCenter(ae(n,0,n.length,i,t,e,n)),this.changed()},e}(ge);vn.prototype.transform;const _n=vn;var mn,Cn=function(t,e){var n=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(n*n+i*i)};!function(){function t(t,e){var n;for(let i=t.length-1;i>0;i--)(t[i][0]>e&&t[i-1][0]<e||t[i][0]<e&&t[i-1][0]>e)&&(n=[e,(e-t[i][0])/(t[i-1][0]-t[i][0])*(t[i-1][1]-t[i][1])+t[i][1]],t.splice(i,0,n))}function e(t,e){var n;for(let i=t.length-1;i>0;i--)(t[i][1]>e&&t[i-1][1]<e||t[i][1]<e&&t[i-1][1]>e)&&(n=[(e-t[i][1])/(t[i-1][1]-t[i][1])*(t[i-1][0]-t[i][0])+t[i][0],e],t.splice(i,0,n))}mn=function(n,i){var o="Polygon"===i.getType();if(!o&&"MultiPolygon"!==i.getType())return null;var r=i.getCoordinates();return o&&(r=[r]),r.forEach((function(i){i.forEach((function(i){t(i,n[0]),t(i,n[2]),e(i,n[1]),e(i,n[3])}))})),r.forEach((function(t){t.forEach((function(t){t.forEach((function(t){t[0]<n[0]?t[0]=n[0]:t[0]>n[2]&&(t[0]=n[2]),t[1]<n[1]?t[1]=n[1]:t[1]>n[3]&&(t[1]=n[3])}))}))})),o?new fn(r[0]):new gn(r)}}();var wn=function(t,e,n,i){var o=[];!1!==i&&o.push(t);var r=Cn(t,e);if(r){var s=Math.round(r/n);if(s>1)for(var a=(e[0]-t[0])/s,l=(e[1]-t[1])/s,h=1;h<s;h++)o.push([t[0]+a*h,t[1]+l*h])}return o.push(e),o};Ye.prototype.sampleAt=function(t){for(var e=this.getCoordinates(),n=[],i=1;i<e.length;i++)n=n.concat(wn(e[i-1],e[i],t,1===i));return new Ye(n)},Ue.prototype.sampleAt=function(t){var e=this.getCoordinates(),n=[];return e.forEach((function(e){for(var i=[],o=1;o<e.length;o++)i=i.concat(wn(e[o-1],e[o],t,1===o));n.push(i)})),new Ue(n)},fn.prototype.sampleAt=function(t){var e=this.getCoordinates(),n=[];return e.forEach((function(e){for(var i=[],o=1;o<e.length;o++)i=i.concat(wn(e[o-1],e[o],t,1===o));n.push(i)})),new fn(n)},gn.prototype.sampleAt=function(t){var e=this.getCoordinates(),n=[];return e.forEach((function(e){var i=[];n.push(i),e.forEach((function(e){for(var n=[],o=1;o<e.length;o++)n=n.concat(wn(e[o-1],e[o],t,1===o));i.push(n)}))})),new gn(n)},_n.prototype.intersection=function(t,e){if(t.sampleAt){var n=(l=this.getCenter().concat(this.getCenter()),h=this.getRadius(),u?(u[0]=l[0]-h,u[1]=l[1]-h,u[2]=l[2]+h,u[3]=l[3]+h,u):[l[0]-h,l[1]-h,l[2]+h,l[3]+h]);t=(t=mn(n,t)).simplify(e);var i=this.getCenter(),o=this.getRadius(),r=t.sampleAt(e).getCoordinates();switch(t.getType()){case"Polygon":r=[r];case"MultiPolygon":var s=!1,a=[];return r.forEach((function(t){var e=[];a.push(e),t.forEach((function(t){var n=[];e.push(n),t.forEach((function(t){var e=Cn(i,t);e>o?(s=!0,n.push([i[0]+o/e*(t[0]-i[0]),i[1]+o/e*(t[1]-i[1])])):n.push(t)}))}))})),s?"Polygon"===t.getType()?new fn(a[0]):new gn(a):t}}else console.warn("[ol/geom/Circle~intersection] Unsupported geometry type: "+t.getType());var l,h,u;return t},window.ol&&(ol.ext.input={});var xn=function(t){t=t||{},dt.call(this);var e,n=this.input=t.input;n||(n=this.input=document.createElement("INPUT"),t.type&&n.setAttribute("type",t.type),void 0!==t.min&&n.setAttribute("min",t.min),void 0!==t.max&&n.setAttribute("max",t.max),void 0!==t.step&&n.setAttribute("step",t.step),t.parent&&t.parent.appendChild(n)),t.disabled&&(n.disabled=!0),void 0!==t.checked&&(n.checked=!!t.checked),void 0!==t.val&&(n.value=t.val),t.hidden&&(n.style.display="none"),n.addEventListener("focus",function(){this.element&&this.element.classList.add("ol-focus")}.bind(this)),n.addEventListener("focusout",function(){this.element&&(e&&clearTimeout(e),e=setTimeout(function(){this.element.classList.remove("ol-focus")}.bind(this),0))}.bind(this))};i(xn,dt),xn.prototype._listenDrag=function(t,e){var n=function(n){this.moving=!0,this.element.classList.add("ol-moving");var i=function(n){"pointerup"===n.type&&(document.removeEventListener("pointermove",i),document.removeEventListener("pointerup",i),document.removeEventListener("pointercancel",i),setTimeout(function(){this.moving=!1,this.element.classList.remove("ol-moving")}.bind(this))),n.target===t&&e(n),n.stopPropagation(),n.preventDefault()}.bind(this);document.addEventListener("pointermove",i,!1),document.addEventListener("pointerup",i,!1),document.addEventListener("pointercancel",i,!1),n.stopPropagation(),n.preventDefault()}.bind(this);t.addEventListener("mousedown",n,!1),t.addEventListener("touchstart",n,!1)},xn.prototype.setValue=function(t){void 0!==t&&(this.input.value=t),this.input.dispatchEvent(new Event("change"))},xn.prototype.getValue=function(){return this.input.value},xn.prototype.getInputElement=function(){return this.input};const En=xn;var bn=function(t){t=t||{},En.call(this,t);var e=this.element=document.createElement("LABEL");t.html instanceof Element?e.appendChild(t.html):void 0!==t.html&&(e.innerHTML=t.html),e.className=("ol-ext-check ol-ext-checkbox "+(t.className||"")).trim(),this.input.parentNode&&this.input.parentNode.insertBefore(e,this.input),e.appendChild(this.input),e.appendChild(document.createElement("SPAN")),t.after&&e.appendChild(document.createTextNode(t.after)),this.input.addEventListener("change",function(){this.dispatchEvent({type:"check",checked:this.input.checked,value:this.input.value})}.bind(this))};i(bn,En),bn.prototype.isChecked=function(){return this.input.checked};const Ln=bn;var Mn=function(t){t=t||{},Ln.call(this,t),this.element.className=("ol-ext-toggle-switch "+(t.className||"")).trim()};i(Mn,Ln);const Pn=Mn;var On=function(t){t=t||{},Ln.call(this,t),this.element.className=("ol-ext-check ol-ext-radio "+(t.className||"")).trim()};i(On,Ln);const Sn=On;var Tn={create:function(t,e){var n;if(e=e||{},"TEXT"===t)n=document.createTextNode(e.html||""),e.parent&&e.parent.appendChild(n);else for(var i in n=document.createElement(t),/button/i.test(t)&&n.setAttribute("type","button"),e)switch(i){case"className":e.className&&e.className.trim&&n.setAttribute("class",e.className.trim());break;case"text":n.innerText=e.text;break;case"html":e.html instanceof Element?n.appendChild(e.html):void 0!==e.html&&(n.innerHTML=e.html);break;case"parent":e.parent&&e.parent.appendChild(n);break;case"options":if(/select/i.test(t))for(var o in e.options)Tn.create("OPTION",{html:o,value:e.options[o],parent:n});break;case"style":Tn.setStyle(n,e.style);break;case"change":case"click":Tn.addListener(n,i,e[i]);break;case"on":for(var r in e.on)Tn.addListener(n,r,e.on[r]);break;case"checked":n.checked=!!e.checked;break;default:n.setAttribute(i,e[i])}return n},createSwitch:function(t){var e=Tn.create("INPUT",{type:"checkbox",on:t.on,click:t.click,change:t.change,parent:t.parent}),n=Object.assign({input:e},t||{});return new Pn(n),e},createCheck:function(t){var e=Tn.create("INPUT",{name:t.name,type:"radio"===t.type?"radio":"checkbox",on:t.on,parent:t.parent}),n=Object.assign({input:e},t||{});return"radio"===t.type?new Sn(n):new Ln(n),e},setHTML:function(t,e){e instanceof Element?t.appendChild(e):void 0!==e&&(t.innerHTML=e)},appendText:function(t,e){t.appendChild(document.createTextNode(e||""))},addListener:function(t,e,n,i){"string"==typeof e&&(e=e.split(" ")),e.forEach((function(e){t.addEventListener(e,n,i)}))},removeListener:function(t,e,n){"string"==typeof e&&(e=e.split(" ")),e.forEach((function(e){t.removeEventListener(e,n)}))},show:function(t){t.style.display=""},hide:function(t){t.style.display="none"},hidden:function(t){return"none"===Tn.getStyle(t,"display")},toggle:function(t){t.style.display="none"===t.style.display?"":"none"},setStyle:function(t,e){for(var n in e)switch(n){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":"number"==typeof e[n]?t.style[n]=e[n]+"px":t.style[n]=e[n];break;default:t.style[n]=e[n]}},getStyle:function(t,e){var n,i=(t.ownerDocument||document).defaultView;if(i&&i.getComputedStyle)e=e.replace(/([A-Z])/g,"-$1").toLowerCase(),n=i.getComputedStyle(t,null).getPropertyValue(e);else if(t.currentStyle&&(e=e.replace(/-(\w)/g,(function(t,e){return e.toUpperCase()})),n=t.currentStyle[e],/^\d+(em|pt|%|ex)?$/i.test(n)))return function(e){var n=t.style.left,i=t.runtimeStyle.left;return t.runtimeStyle.left=t.currentStyle.left,t.style.left=e||0,e=t.style.pixelLeft+"px",t.style.left=n,t.runtimeStyle.left=i,e}(n);return/px$/.test(n)?parseInt(n):n},outerHeight:function(t){return t.offsetHeight+Tn.getStyle(t,"marginBottom")},outerWidth:function(t){return t.offsetWidth+Tn.getStyle(t,"marginLeft")},offsetRect:function(t){var e=t.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:e.height||e.bottom-e.top,width:e.width||e.right-e.left}},getFixedOffset:function(t){var e={left:0,top:0},n=function(t){if(!t)return e;if("absolute"===Tn.getStyle(t,"position")&&"none"!==Tn.getStyle(t,"transform")){var i=t.getBoundingClientRect();return e.left+=i.left,e.top+=i.top,e}return n(t.offsetParent)};return n(t.offsetParent)},positionRect:function(t,e){var n=0,i=0,o=function(r){if(r)return n+=r.offsetLeft,i+=r.offsetTop,o(r.offsetParent);var s={top:t.offsetTop+i,left:t.offsetLeft+n};return e&&(s.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,s.left-=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),s.bottom=s.top+t.offsetHeight,s.right=s.top+t.offsetWidth,s};return o(t.offsetParent)},scrollDiv:function(t,e){var n,i,o,r,s,a=!1,l=0,h=0,u="function"==typeof(e=e||{}).onmove?e.onmove:function(){},c=e.vertical?"screenY":"screenX",f=e.vertical?"scrollTop":"scrollLeft",p=!1,d=0,g=function(){s&&(d++,setTimeout(y))},y=function(){if(s){if(--d)return;var e=t.clientHeight,n=t.scrollHeight;i=e/n,s.style.height=100*i+"%",s.style.top=t.scrollTop/n*100+"%",r.style.height=e+"px",e>n-.5?r.classList.add("ol-100pc"):r.classList.remove("ol-100pc")}},v=function(e){e.target.classList.contains("ol-noscroll")||(p=!1,a=e[c],h=new Date,t.classList.add("ol-move"),e.preventDefault(),window.addEventListener("pointermove",_),Tn.addListener(window,["pointerup","pointercancel"],w))},_=function(e){if(p=!0,!1!==a){var r=(o?-1/i:1)*(a-e[c]);t[f]+=r,(n=new Date)-h&&(l=(l+r/(n-h))/2),a=e[c],h=n,r&&u(!0)}},m=function(e){var n=e>0?Math.min(100,e/2):Math.max(-100,e/2);e-=n,t[f]+=n,-1<e&&e<1?(p?setTimeout((function(){t.classList.remove("ol-move")})):t.classList.remove("ol-move"),p=!1,u(!1)):setTimeout((function(){m(e)}),40)};if(e.vertical&&e.minibar){var C=function(n){t.removeEventListener("pointermove",C),t.parentNode.classList.add("ol-miniscroll"),s=Tn.create("DIV"),r=Tn.create("DIV",{className:"ol-scroll",html:s}),t.parentNode.insertBefore(r,t),s.addEventListener("pointerdown",(function(t){o=!0,v(t)})),e.mousewheel&&(Tn.addListener(r,["mousewheel","DOMMouseScroll","onmousewheel"],(function(t){x(t)})),Tn.addListener(s,["mousewheel","DOMMouseScroll","onmousewheel"],(function(t){x(t)}))),t.parentNode.addEventListener("pointerenter",g),window.addEventListener("resize",g),!1!==n&&g()};t.parentNode?C(!1):t.addEventListener("pointermove",C),t.addEventListener("scroll",(function(){g()}))}t.style["touch-action"]="none",t.style.overflow="hidden",t.classList.add("ol-scrolldiv"),Tn.addListener(t,["pointerdown"],(function(t){o=!1,v(t)})),t.addEventListener("click",(function(e){t.classList.contains("ol-move")&&(e.preventDefault(),e.stopPropagation())}),!0);var w=function(n){(h=new Date-h)>100||o?l=0:h>0&&(l=((l||0)+(a-n[c])/h)/2),m(!1===e.animate?0:200*l),a=!1,l=0,h=0,t.classList.contains("ol-move")?t.classList.remove("ol-hasClick"):(t.classList.add("ol-hasClick"),setTimeout((function(){t.classList.remove("ol-hasClick")}),500)),o=!1,window.removeEventListener("pointermove",_),Tn.removeListener(window,["pointerup","pointercancel"],w)},x=function(e){var n=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));return t.classList.add("ol-move"),t[f]-=30*n,t.classList.remove("ol-move"),!1};return e.mousewheel&&Tn.addListener(t,["mousewheel","DOMMouseScroll","onmousewheel"],x),{refresh:g}},dispatchEvent:function(t,e){var n;try{n=new CustomEvent(t)}catch(e){(n=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,{})}e.dispatchEvent(n)}};const kn=Tn;var An=function(t){t=t||{},this.info=t.info||An.prototype.info;var e,n=this;if(t.target)(e=document.createElement("div")).classList.add(t.className||"ol-profil");else{(e=document.createElement("div")).className=((t.className||"ol-profil")+" ol-unselectable ol-control ol-collapsed").trim(),this.button=document.createElement("button"),this.button.title=t.title||"Profile",this.button.setAttribute("type","button");var i=function(t){n.toggle(),t.preventDefault()};this.button.addEventListener("click",i),this.button.addEventListener("touchstart",i),e.appendChild(this.button)}t.style instanceof Pt?this._style=t.style:this._style=new Pt({text:new At,stroke:new Ot({width:1.5,color:"#369"})}),this._style.getText()||this._style.setText(new At),t.selectStyle instanceof Pt?this._selectStyle=t.selectStyle:this._selectStyle=new Pt({fill:new bt({color:"#369"})});var o=document.createElement("div");o.classList.add("ol-inner"),e.appendChild(o);var r=document.createElement("div");r.style.position="relative",o.appendChild(r);var s=this.ratio=2;this.canvas_=document.createElement("canvas"),this.canvas_.width=(t.width||300)*s,this.canvas_.height=(t.height||150)*s;var a={msTransform:"scale(0.5,0.5)",msTransformOrigin:"0 0",webkitTransform:"scale(0.5,0.5)",webkitTransformOrigin:"0 0",mozTransform:"scale(0.5,0.5)",mozTransformOrigin:"0 0",transform:"scale(0.5,0.5)",transformOrigin:"0 0"};Object.keys(a).forEach((function(t){t in n.canvas_.style&&(n.canvas_.style[t]=a[t])}));var l=document.createElement("div");r.appendChild(l),l.style.width=this.canvas_.width/s+"px",l.style.height=this.canvas_.height/s+"px",l.appendChild(this.canvas_),l.addEventListener("pointerdown",this.onMove.bind(this)),document.addEventListener("pointerup",this.onMove.bind(this)),l.addEventListener("mousemove",this.onMove.bind(this)),l.addEventListener("touchmove",this.onMove.bind(this)),_t.call(this,{element:e,target:t.target}),this.set("selectable",t.selectable),this.margin_={top:10*s,left:45*s,bottom:30*s,right:10*s},this.info.ytitle||(this.margin_.left-=20*s),this.info.xtitle||(this.margin_.bottom-=20*s),this.bar_=document.createElement("div"),this.bar_.classList.add("ol-profilbar"),this.bar_.style.top=this.margin_.top/s+"px",this.bar_.style.height=(this.canvas_.height-this.margin_.top-this.margin_.bottom)/s+"px",r.appendChild(this.bar_),this.cursor_=document.createElement("div"),this.cursor_.classList.add("ol-profilcursor"),r.appendChild(this.cursor_),this.popup_=document.createElement("div"),this.popup_.classList.add("ol-profilpopup"),this.cursor_.appendChild(this.popup_);var h=document.createElement("table");h.cellPadding="0",h.cellSpacing="0",h.style.clientWidth=this.canvas_.width/s+"px",r.appendChild(h);var u=document.createElement("tr");u.classList.add("track-info"),h.appendChild(u);var c=document.createElement("td");c.innerHTML=(this.info.zmin||"Zmin")+': <span class="zmin">',u.appendChild(c);var f=document.createElement("td");f.innerHTML=(this.info.zmax||"Zmax")+': <span class="zmax">',u.appendChild(f);var p=document.createElement("td");p.innerHTML=(this.info.distance||"Distance")+': <span class="dist">',u.appendChild(p);var d=document.createElement("td");d.innerHTML=(this.info.time||"Time")+': <span class="time">',u.appendChild(d);var g=document.createElement("tr");g.classList.add("point-info"),h.appendChild(g);var y=document.createElement("td");y.innerHTML=(this.info.altitude||"Altitude")+': <span class="z">',g.appendChild(y);var v=document.createElement("td");v.innerHTML=(this.info.distance||"Distance")+': <span class="dist">',g.appendChild(v);var _,m,C=document.createElement("td");(C.innerHTML=(this.info.time||"Time")+': <span class="time">',g.appendChild(C),this.tab_=[],t.feature&&this.setGeometry(t.feature),t.zoomable)&&(this.set("selectable",!0),this.on("change:geometry",(function(){m=null})),this.on("dragstart",(function(t){_=t.index})),this.on("dragend",function(t){if(Math.abs(_-t.index)>10){if(!m)var n=kn.create("BUTTON",{parent:e,className:"ol-zoom-out",click:function(t){t.stopPropagation(),t.preventDefault(),m&&(this.dispatchEvent({type:"zoom"}),this.setGeometry(m,this._geometry[1])),e.removeChild(n)}.bind(this)});var i=m||this._geometry[0],o=new Ye(this.getSelection(_,t.index));this.setGeometry(o,this._geometry[1]),m=i,this.dispatchEvent({type:"zoom",geometry:o,start:_,end:t.index})}}.bind(this)))};i(An,_t),An.prototype.info={zmin:"Zmin",zmax:"Zmax",ytitle:"Altitude (m)",xtitle:"Distance (km)",time:"Time",altitude:"Altitude",distance:"Distance",altitudeUnits:"m",distanceUnitsM:"m",distanceUnitsKM:"km"},An.prototype.popup=function(t){this.popup_.innerHTML=t},An.prototype._drawAt=function(t,e){t?(this.cursor_.style.left=e+"px",this.cursor_.style.top=(this.canvas_.height-this.margin_.bottom+t[1]*this.scale_[1]+this.dy_)/this.ratio+"px",this.cursor_.style.display="block",this.bar_.parentElement.classList.add("over"),this.bar_.style.left=e+"px",this.bar_.style.display="block",this.element.querySelector(".point-info .z").textContent=t[1]+this.info.altitudeUnits,this.element.querySelector(".point-info .dist").textContent=(t[0]/1e3).toFixed(1)+this.info.distanceUnitsKM,this.element.querySelector(".point-info .time").textContent=t[2],e>this.canvas_.width/this.ratio/2?this.popup_.classList.add("ol-left"):this.popup_.classList.remove("ol-left")):(this.cursor_.style.display="none",this.bar_.style.display="none",this.cursor_.style.display="none",this.bar_.parentElement.classList.remove("over"))},An.prototype.showAt=function(t){var e,n,i,o=1/0;if(void 0===t)this.bar_.parentElement.classList.contains("over")&&this._drawAt();else if(t.length)for(e=1;n=this.tab_[e];e++){var r=Cn(n[3],t);r<o&&(i=n,o=r)}else for(e=0;(n=this.tab_[e])&&(i=n,!(n[0]>=t));e++);if(i){var s=(i[0]*this.scale_[0]+this.margin_.left)/this.ratio;return this._drawAt(i,s),i[3]}return null},An.prototype.showAtTime=function(t,e){var n,i,o;if(t instanceof Date?t=t.getTime()/1e3:e&&(t+=this.tab_[0][3][3]),void 0===t)this.bar_.parentElement.classList.contains("over")&&this._drawAt();else for(n=0;(i=this.tab_[n])&&(o=i,!(i[3][3]>=t));n++);if(o){var r=(o[0]*this.scale_[0]+this.margin_.left)/this.ratio;return this._drawAt(o,r),o[3]}return null},An.prototype.pointAtTime=function(t){var e,n;for(e=1;n=this.tab_[e];e++){var i=n[3][3];if(i>=t){var o=this.tab_[e-1][3];return(o[3]+i)/2<t?o:n}}return this.tab_[this.tab_.length-1][3]},An.prototype.onMove=function(t){if(this.tab_.length){var e=this.canvas_.getBoundingClientRect(),n=e.top+window.pageYOffset-document.documentElement.clientTop,i=e.left+window.pageXOffset-document.documentElement.clientLeft,o=t.pageX||t.touches&&t.touches.length&&t.touches[0].pageX||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageX,r=t.pageY||t.touches&&t.touches.length&&t.touches[0].pageY||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageY,s=o-i,a=r-n,l=this.ratio;if(s>this.margin_.left/l-20&&s<(this.canvas_.width-this.margin_.right)/l+8&&a>this.margin_.top/l&&a<(this.canvas_.height-this.margin_.bottom)/l){var h,u,c=(s*l-this.margin_.left)/this.scale_[0],f=this.tab_[0];for(h=1;u=this.tab_[h];h++)if(u[0]>=c){c<(u[0]+f[0])/2&&(h=0,u=f);break}switch(u||(u=this.tab_[this.tab_.length-1]),s=Math.max(this.margin_.left/l,Math.min(s,(this.canvas_.width-this.margin_.right)/l)),this._drawAt(u,s),this.dispatchEvent({type:"over",click:"click"===t.type,index:h,coord:u[3],time:u[2],distance:u[0]}),t.type){case"pointerdown":this._dragging={event:{type:"dragstart",index:h,coord:u[3],time:u[2],distance:u[0]},pageX:o,pageY:r};break;case"pointerup":this._dragging&&this._dragging.pageX?Math.abs(this._dragging.pageX-o)<3&&Math.abs(this._dragging.pageY-r)<3&&(this.dispatchEvent({type:"click",index:h,coord:u[3],time:u[2],distance:u[0]}),this.refresh()):this.dispatchEvent({type:"dragend",index:h,coord:u[3],time:u[2],distance:u[0]}),this._dragging=!1;break;default:if(this._dragging)if(this._dragging.pageX)(Math.abs(this._dragging.pageX-o)>3||Math.abs(this._dragging.pageY-r)>3)&&(this._dragging.pageX=this._dragging.pageY=!1,this.dispatchEvent(this._dragging.event));else{this.dispatchEvent({type:"dragging",index:h,coord:u[3],time:u[2],distance:u[0]});var p=Math.min(this._dragging.event.index,h),d=Math.max(this._dragging.event.index,h);this.refresh(),this.get("selectable")&&this._drawGraph(this.tab_.slice(p,d),this._selectStyle)}}}else this.bar_.parentElement.classList.contains("over")&&(this._drawAt(),this.dispatchEvent({type:"out"})),"pointerup"===t.type&&this._dragging&&(this.dispatchEvent({type:"dragcancel"}),this._dragging=!1)}},An.prototype.show=function(){this.element.classList.remove("ol-collapsed"),this.dispatchEvent({type:"show",show:!0})},An.prototype.hide=function(){this.element.classList.add("ol-collapsed"),this.dispatchEvent({type:"show",show:!1})},An.prototype.toggle=function(){this.element.classList.toggle("ol-collapsed");var t=this.element.classList.contains("ol-collapsed");this.dispatchEvent({type:"show",show:!t})},An.prototype.isShown=function(){return!this.element.classList.contains("ol-collapsed")},An.prototype.getSelection=function(t,e){for(var n=[],i=Math.max(Math.min(t,e),0),o=Math.min(Math.max(t,e),this.tab_.length-1),r=i;r<=o;r++)n.push(this.tab_[r][3]);return n},An.prototype._drawGraph=function(t,e){if(t.length){var n,i,o=this.canvas_.getContext("2d"),r=this.scale_[0],s=this.scale_[1],a=this.dy_,l=this.ratio;for(o.beginPath(),n=0;i=t[n];n++)0==n?o.moveTo(i[0]*r,i[1]*s+a):o.lineTo(i[0]*r,i[1]*s+a);e.getStroke()&&(o.strokeStyle=e.getStroke().getColor()||"#000",o.lineWidth=e.getStroke().getWidth()*l,o.setLineDash([]),o.stroke()),e.getFill()&&(o.fillStyle=e.getFill().getColor()||"#000",o.Style=e.getFill().getColor()||"#000",o.lineTo(t[t.length-1][0]*r,0),o.lineTo(t[0][0]*r,0),o.fill())}},An.prototype.setGeometry=function(t,e){if(e||(e={}),t instanceof Et&&(t=t.getGeometry()),this._geometry=[t,e],/Z/.test(t.getLayout())){/M/.test(t.getLayout())?this.element.querySelector(".time").parentElement.style.display="block":this.element.querySelector(".time").parentElement.style.display="none";var n=t.getCoordinates();switch(t.getType()){case"LineString":break;case"MultiLineString":n=n[0];break;default:return}var i,o,r,s,a,l,h,c=e.projection||this.getMap().getView().getProjection(),f=1/0,p=-1/0,d=this.tab_=[];for(i=0;o=n[i];i++)(s=o[2])<f&&(f=s),s>p&&(p=s),0==i?r=0:r+=(l=n[i-1],h=o,u(X(l,c,"EPSG:4326"),X(h,c,"EPSG:4326"))),a=g(n[0][3],o[3]),d.push([r,s,a,o]);this._z=[f,p],this.set("graduation",e.graduation||100),this.set("zmin",e.zmin),this.set("zmax",e.zmax),this.set("amplitude",e.amplitude),this.set("unit",e.unit),this.set("zunit",e.zunit),this.set("zDigits",e.zDigits),this.set("zMaxChars",e.zMaxChars),this.dispatchEvent({type:"change:geometry",geometry:t}),this.refresh()}function g(t,e){if(!t||!e)return"-";var n=(e-t)/60,i=Math.trunc(n/60),o=Math.trunc(n-60*i);return i+"h"+(o<10?"0":"")+o+"mn"}},An.prototype.refresh=function(){var t=this.canvas_,e=t.getContext("2d"),n=t.width,i=t.height;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,n,i);var o,r=this._z[0],s=this._z[1],a=this.tab_,l=a[a.length-1][0],h=a[a.length-1][2];if(l){e.setTransform(1,0,0,1,this.margin_.left,i-this.margin_.bottom);var u=this.ratio;n-=this.margin_.right+this.margin_.left,i-=this.margin_.top+this.margin_.bottom,e.strokeStyle=this._style.getText().getFill().getColor()||"#000",e.lineWidth=.5*u,e.beginPath(),e.moveTo(0,0),e.lineTo(0,-i),e.moveTo(0,0),e.lineTo(n,0),e.stroke(),this.element.querySelector(".track-info .zmin").textContent=r.toFixed(2)+this.info.altitudeUnits,this.element.querySelector(".track-info .zmax").textContent=s.toFixed(2)+this.info.altitudeUnits,this.element.querySelector(".track-info .dist").textContent=l>1e3?(l/1e3).toFixed(1)+this.info.distanceUnitsKM:l.toFixed(1)+this.info.distanceUnitsM,this.element.querySelector(".track-info .time").textContent=h;for(var c=this.get("graduation");;){if(!(i/(((s=Math.ceil(s/c)*c)-(r=Math.floor(r/c)*c))/c)<15*u))break;c*=2}"number"==typeof this.get("zmin")&&r>this.get("zmin")&&(r=this.get("zmin")),"number"==typeof this.get("zmax")&&s<this.get("zmax")&&(s=this.get("zmax"));var f=this.get("amplitude");f&&(s=Math.max(r+f,s));var p=n/l,d=-i/(s-r),g=this.dy_=-r*d;this.scale_=[p,d],this._drawGraph(a,this._style),e.textAlign="right",e.textBaseline="top",e.fillStyle=this._style.getText().getFill().getColor()||"#000",e.beginPath();var y,v=this.get("zDigits")||0,_=null;if("number"==typeof this.get("zMaxChars"))if(y="km"!=this.get("zunit")?Math.max(r.toFixed(v).length,s.toFixed(v).length):Math.max((r/1e3).toFixed(1).length,(s/1e3).toFixed(1).length),this.get("zMaxChars")<y){_=Math.floor(Math.log10(Math.max(Math.abs(r),Math.abs(s),Number.MIN_VALUE))),e.font="bold "+9*u+"px arial",e.fillText(_.toString(),-8*u,8*u);var m=e.measureText(_.toString()),C=m.width,w=m.actualBoundingBoxAscent+m.actualBoundingBoxDescent;e.font="bold "+12*u+"px arial",e.fillText("10",-8*u-C,8*u+.5*w)}for(e.font=10*u+"px arial",e.textBaseline="middle",o=r;o<=s;o+=c){if(null!==_){var x=o/Math.pow(10,_);"km"==this.get("zunit")&&(x/=1e3);var E=this.get("zMaxChars")-Math.floor(Math.log10(Math.max(Math.abs(x),1))+1)-1;x<0&&(E-=1),this.get("zunit"),e.fillText(x.toFixed(Math.max(E,0)),-4*u,o*d+g)}else"km"!=this.get("zunit")?e.fillText(o.toFixed(v),-4*u,o*d+g):e.fillText((o/1e3).toFixed(1),-4*u,o*d+g);e.moveTo(-2*u,o*d+g),0!=o?e.lineTo(l*p,o*d+g):e.lineTo(0,o*d+g)}e.textAlign="center",e.textBaseline="top",e.setLineDash([u,3*u]);var b,L=this.get("unit")||"km";for(l>1e3?(b=100*Math.round(l/1e3))>1e3&&(b=1e3*Math.ceil(b/1e3)):(L="m",b=l>100?10*Math.round(l/100):l>10?Math.round(l/10):l>1?Math.round(l)/10:l),o=0;o<=l;o+=b){var M="m"==L?o:o/1e3;e.fillText(Math.round(10*M)/10,o*p,4*u),e.moveTo(o*p,2*u),e.lineTo(o*p,0)}e.font=12*u+"px arial",e.fillText(this.info.xtitle.replace("(km)","("+L+")"),n/2,18*u),e.save(),e.rotate(-Math.PI/2),e.fillText(this.info.ytitle,i/2,-this.margin_.left),e.restore(),e.stroke()}else console.error("[ol/control/Profil] no data...",a)},An.prototype.getImage=function(t,e){return"canvas"===t?this.canvas_:this.canvas_.toDataURL(t,e)};const Rn=An;var Fn=Origo.ol.layer.Vector,Dn=Origo.ol.source.Vector,Gn=Origo.ol.style.Style,In=Origo.ol.style.Circle,jn=Origo.ol.style.Fill,Nn=Origo.ol.style.Stroke,zn=Origo.ol.Feature,Xn=Origo.ol.geom.Point,Yn=function(t){var e,n,i,o,r,s=function(t,i,o){if(i.showProfile&&("LineString"===t.getGeometry().getType()||"MultiLineString"===t.getGeometry().getType())&&("XYZ"===t.getGeometry().getLayout()||"XYZM"===t.getGeometry().getLayout())){var r=document.createElement("li"),s=new Rn({target:r,width:240,info:{zmin:"Min höjd",zmax:"Max höjd",ytitle:"Höjd (m)",xtitle:"Distans (km)",time:"Tid",altitude:"Höjd",distance:"Distans",altitudeUnits:"m",distanceUnitsM:"m",distanceUnitsKM:"km"}});return e.addControl(s),s.setGeometry(t.getGeometry()),s.on(["over","out"],(function(t){n&&("over"===t.type?(n.setGeometry(new Xn(t.coord)),n.setStyle(null)):n.setStyle([]))})),r}return!1};return Origo.ui.Component({name:"elevationProfile",onAdd:function(){},onInit:function(){e=t.getMap(),r=[new Gn({image:new In({radius:8,fill:new jn({color:[0,153,255]}),stroke:new Nn({color:[255,255,255],width:2})}),zIndex:1/0})],n=new zn(new Xn([0,0])),i=new Dn,o=new Fn({group:"none",source:i,style:r,name:"elevationProfile",visible:!0}),n.setStyle([]),e.addLayer(o),i.addFeature(n),t.getControlByName("featureInfo").addAttributeType("showProfile",s)},onShowElevationProfile:function(e){var n=s(e,{showProfile:!0}),i=t.getControlByName("featureInfo"),o={};o.feature=e,o.title="Markhöjd profil",o.content=n;var r=e.getGeometry().getExtent(),a=(r[0]+r[2])/2;i.render([o],"overlay",[a,r[3]],{ignorePan:!0})},onRender:function(){},render:function(){}})};window.Origo&&(Origo.controls.ElevationProfile=Yn);const Bn=Yn})(),ElevationProfile=e.default})();